

<%-include('../layouts/adminHead')-%>

<%-include('../layouts/adminSidebar')-%>

    <!-- space   -->
    <div class="main-panel">
      <div class="content-wrapper">
        <!-- form to add new product   -->
        <div class="col-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Edit Product Offer</h4>
                <%if(locals.message){%>
                <span style="color: red;">
                  <%=message%>
                </span>
                <%}%>
                <form class="forms-sample" action="" method="POST">
                    <div class="form-group">
                        <label for="exampleInputName1">Product</label>
                        <select class="form-control" id="name" name="name" value="<%=poffer.productId_id%>"  required>
                            <option value="<%=poffer.productId_id%>"  selected><%=poffer.productId.Name%></option>
                            <%if(locals.product){%>
                            <%for(let i=0;i<product.length;i++){%>
                            <option value="<%=product[i]._id%>"><%=product[i].Name%></option>
                           <%}%>
                           <%}%>
                        </select>
                    </div>
                  <div class="form-group">
                    <label for="exampleInputName1">Offer Percentage</label>
                    <input type="number" class="form-control" id="percentage" name="percentage" pattern="[0-9]+" value="<%=poffer.percentage%>" title="Please enter numbers only" required>
                    <input hidden class="form-control" id="pid" name="pid" value="<%=poffer._id%>"  required>

                  </div>
                  <div class="form-group">
                    <label for="exampleInputName1">Till Date</label>
                    <input type="date" class="form-control" id="tillDate" name="tillDate" required>
                </div>
                
                
                 
                  
                
                  <button type="submit" class="btn btn-gradient-success mr-2">Update</button>
                  <button onclick="location.href='/admin/productOffers'" class="btn btn-light">Cancel</button>
                </form>
              </div>
            </div>
          </div>




  </div>
</div>

<!--product list-->

  <%-include('../layouts/adminFooter')-%>

  <script>
  
    const tillDate = new Date('<%=poffer.date%>');
        const formattedValidity = tillDate.toISOString().split('T')[0]; // Extract YYYY-MM-DD
        document.getElementById("tillDate").value = formattedValidity;
  </script>