



<%-include('../layouts/header')-%>
<%-include('../layouts/logednavbar')-%><br>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="container">
    <div class="row justify-content-center">
<div class="col-lg-6 "> <!-- Registration form -->
    <div class="card">
        <div class="card-body">
            <h3 class="card-title text-center mb-4">Enter New Password</h3>
            
                <form id="signupForm" method="POST" action="" class="needs-validation" novalidate>
<!-- getting old password -->
                    <div class="mb-3">
                        <label for="oldpassword" class="form-label">Current password</label>
                        <input type="password" class="form-control" id="oldpassword" name="oldpassword" minlength="8" required>
                        <div class="invalid-feedback">Please enter your current password</div>
                        <% if(locals.message){ %>
                        <span style="color: red;"><%= message %></span>
                        <% } %>
                    </div>

                     <!-- getting password -->
                <div class="mb-3">
                    <label for="password" class="form-label">New Password</label>
                    <input type="password" class="form-control" id="password" name="password" minlength="8" required>
                    <div class="invalid-feedback">Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one special character, and one digit.</div>
                </div>


                <div class="mb-3">
                    <label for="confirmPassword" class="form-label">Confirm new password</label>
                    <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" minlength="8" required>
                    <div class="invalid-feedback">Passwords do not match.</div>
                </div>

                <button type="submit" class="btn btn-primary w-100">Submit</button><br><br>
                
            </form>
            <button onclick="location.href='/profile'"  class="btn btn-danger w-100">Cancel</button>
        </div>
    </div>
</div>
<!-- registration form end -->
</div>
</div>
</div>
</div>


<%-include('../layouts/footer')-%>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>

(function () {
    'use strict';

    var forms = document.querySelectorAll('.needs-validation');

    Array.prototype.slice.call(forms)
        .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }

                form.classList.add('was-validated');
            }, false);
        });
})();




document.getElementById('password').addEventListener('input', function () {
var passwordInput = document.getElementById('password');
var passwordValue = passwordInput.value;


var uppercaseRegex = /[A-Z]/;
var lowercaseRegex = /[a-z]/;
var specialCharRegex = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/;
var digitRegex = /\d/;


if (passwordValue.length >= 8 &&
    uppercaseRegex.test(passwordValue) &&
    lowercaseRegex.test(passwordValue) &&
    specialCharRegex.test(passwordValue) &&
    digitRegex.test(passwordValue)) {
    passwordInput.setCustomValidity('');
} else {
    passwordInput.setCustomValidity('Password must be at least 8 characters long and include at least one uppercase letter, one lowercase letter, one special character, and one digit.');
}
});

document.getElementById('confirmPassword').addEventListener('input', function () {
var passwordInput = document.getElementById('password');
var confirmPasswordInput = document.getElementById('confirmPassword');

if (passwordInput.value !== confirmPasswordInput.value) {
    confirmPasswordInput.setCustomValidity('Passwords do not match.');
} else {
    confirmPasswordInput.setCustomValidity('');
}
});


</script>





